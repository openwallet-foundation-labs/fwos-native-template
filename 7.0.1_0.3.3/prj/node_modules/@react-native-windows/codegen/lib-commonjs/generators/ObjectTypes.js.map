{"version":3,"file":"ObjectTypes.js","sourceRoot":"","sources":["../../src/generators/ObjectTypes.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AAEH,YAAY,CAAC;;;AAQb,mDAIyB;AAEzB,SAAS,wBAAwB,CAC/B,IAAmE;IAEnE,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;IACnC,QAAQ,IAAI,CAAC,UAAU,EAAE;QACvB,KAAK,sBAAsB;YACzB,OAAO,aAAa,CAAC;QACvB,KAAK,sBAAsB;YACzB,OAAO,QAAQ,CAAC;QAClB,KAAK,sBAAsB;YACzB,OAAO,kBAAkB,CAAC;QAC5B;YACE,MAAM,IAAI,KAAK,CACb,0DAA0D,UAAU,EAAE,CACvE,CAAC;KACL;AACH,CAAC;AAED,SAAgB,0BAA0B,CACxC,IAA8C,EAC9C,OAAiB,EACjB,aAAqB,EACrB,UAAoD;IAEpD,wDAAwD;IACxD,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC;IAC7B,QAAQ,IAAI,CAAC,IAAI,EAAE;QACjB,KAAK,sBAAsB;YACzB,OAAO,aAAa,CAAC;QACvB,KAAK,sBAAsB,CAAC;QAC5B,KAAK,qBAAqB,CAAC;QAC3B,KAAK,sBAAsB;YACzB,OAAO,QAAQ,CAAC;QAClB,KAAK,qBAAqB;YACxB,OAAO,KAAK,CAAC;QACf,KAAK,uBAAuB;YAC1B,OAAO,MAAM,CAAC;QAChB,KAAK,qBAAqB;YACxB,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,OAAO,eAAe,0BAA0B,CAC9C,IAAI,CAAC,WAAW,EAChB,OAAO,EACP,GAAG,aAAa,UAAU,EAC1B,UAAU,CACX,GAAG,CAAC;aACN;iBAAM;gBACL,OAAO,uBAAuB,CAAC;aAChC;QACH,KAAK,6BAA6B;YAChC,OAAO,kBAAkB,CAAC;QAC5B,KAAK,sBAAsB;YACzB,OAAO,IAAA,wCAAwB,EAAC,OAAO,EAAE,aAAa,EAAE,IAAI,CAAC,CAAC;QAChE,KAAK,wBAAwB,CAAC,CAAC;YAC7B,wDAAwD;YACxD,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACvB,UAAU;YACV,uEAAuE;YACvE,IAAI,IAAI,KAAK,SAAS;gBACpB,MAAM,IAAI,KAAK,CAAC,8BAA8B,IAAI,OAAO,UAAU,EAAE,CAAC,CAAC;YACzE,OAAO,QAAQ,CAAC;SACjB;QACD,KAAK,yBAAyB;YAC5B,OAAO,IAAA,+BAAe,EAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,KAAK,wBAAwB;YAC3B,OAAO,iBAAiB,0BAA0B,CAChD,IAAI,CAAC,cAAc,EACnB,OAAO,EACP,aAAa,EACb,UAAU,CACX,GAAG,CAAC;QACP,KAAK,iBAAiB,CAAC;QACvB,KAAK,qBAAqB;YACxB,OAAO,wBAAwB,CAAC,IAAI,CAAC,CAAC;QACxC;YACE,MAAM,IAAI,KAAK,CAAC,qBAAqB,UAAU,KAAK,UAAU,EAAE,CAAC,CAAC;KACrE;AACH,CAAC;AA1DD,gEA0DC;AAED,SAAgB,cAAc,CAC5B,IAA8C,EAC9C,OAAiB,EACjB,aAAqB;IAErB,OAAO,0BAA0B,CAC/B,IAAI,EACJ,OAAO,EACP,aAAa,EACb,gBAAgB,CACjB,CAAC;AACJ,CAAC;AAXD,wCAWC","sourcesContent":["/**\n * Copyright (c) Microsoft Corporation.\n * Licensed under the MIT License.\n * @format\n */\n\n'use strict';\n\nimport type {\n  NativeModuleEnumDeclaration,\n  NativeModuleBaseTypeAnnotation,\n  NativeModuleUnionTypeAnnotation,\n  Nullable,\n} from '@react-native/codegen/lib/CodegenSchema';\nimport {\n  AliasMap,\n  getAliasCppName,\n  getAnonymousAliasCppName,\n} from './AliasManaging';\n\nfunction translateUnionReturnType(\n  type: NativeModuleEnumDeclaration | NativeModuleUnionTypeAnnotation,\n): string {\n  const memberType = type.memberType;\n  switch (type.memberType) {\n    case 'StringTypeAnnotation':\n      return 'std::string';\n    case 'NumberTypeAnnotation':\n      return 'double';\n    case 'ObjectTypeAnnotation':\n      return '::React::JSValue';\n    default:\n      throw new Error(\n        `Unknown enum/union member type in translateReturnType: ${memberType}`,\n      );\n  }\n}\n\nexport function translateFieldOrReturnType(\n  type: Nullable<NativeModuleBaseTypeAnnotation>,\n  aliases: AliasMap,\n  baseAliasName: string,\n  callerName: 'translateField' | 'translateReturnType',\n): string {\n  // avoid: Property 'type' does not exist on type 'never'\n  const returnType = type.type;\n  switch (type.type) {\n    case 'StringTypeAnnotation':\n      return 'std::string';\n    case 'NumberTypeAnnotation':\n    case 'FloatTypeAnnotation':\n    case 'DoubleTypeAnnotation':\n      return 'double';\n    case 'Int32TypeAnnotation':\n      return 'int';\n    case 'BooleanTypeAnnotation':\n      return 'bool';\n    case 'ArrayTypeAnnotation':\n      if (type.elementType) {\n        return `std::vector<${translateFieldOrReturnType(\n          type.elementType,\n          aliases,\n          `${baseAliasName}_element`,\n          callerName,\n        )}>`;\n      } else {\n        return `::React::JSValueArray`;\n      }\n    case 'GenericObjectTypeAnnotation':\n      return '::React::JSValue';\n    case 'ObjectTypeAnnotation':\n      return getAnonymousAliasCppName(aliases, baseAliasName, type);\n    case 'ReservedTypeAnnotation': {\n      // avoid: Property 'name' does not exist on type 'never'\n      const name = type.name;\n      // (#6597)\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (name !== 'RootTag')\n        throw new Error(`Unknown reserved function: ${name} in ${callerName}`);\n      return 'double';\n    }\n    case 'TypeAliasTypeAnnotation':\n      return getAliasCppName(type.name);\n    case 'NullableTypeAnnotation':\n      return `std::optional<${translateFieldOrReturnType(\n        type.typeAnnotation,\n        aliases,\n        baseAliasName,\n        callerName,\n      )}>`;\n    case 'EnumDeclaration':\n    case 'UnionTypeAnnotation':\n      return translateUnionReturnType(type);\n    default:\n      throw new Error(`Unhandled type in ${callerName}: ${returnType}`);\n  }\n}\n\nexport function translateField(\n  type: Nullable<NativeModuleBaseTypeAnnotation>,\n  aliases: AliasMap,\n  baseAliasName: string,\n): string {\n  return translateFieldOrReturnType(\n    type,\n    aliases,\n    baseAliasName,\n    'translateField',\n  );\n}\n"]}